BlogEngine={$:function(n){return document.getElementById(n)},setFlag:function(n){BlogEngine.comments.flagImage.src=n.length>0?BlogEngineRes.webRoot+"Content/images/blog/flags/"+n+".png":BlogEngineRes.webRoot+"Content/images/blog/pixel.gif"},showCommentPreview:function(){var n=BlogEngine.$("preview"),t=BlogEngine.$("compose"),i;return n&&(n.className="selected"),t&&(t.className=""),BlogEngine.$("commentCompose").style.display="none",BlogEngine.$("commentPreview").style.display="block",BlogEngine.$("commentPreview").innerHTML='<img src="'+BlogEngineRes.webRoot+'Content/images/blog/ajax-loader.gif" width="24" height="24" alt="Loading" />',i=BlogEngine.$("commentPreview").innerHTML,BlogEngine.addComment(!0),!1},composeComment:function(){var n=BlogEngine.$("preview"),t=BlogEngine.$("compose");return n&&(n.className=""),t&&(t.className="selected"),BlogEngine.$("commentPreview")&&(BlogEngine.$("commentPreview").style.display="none"),BlogEngine.$("commentCompose")&&(BlogEngine.$("commentCompose").style.display="block"),!1},endShowPreview:function(n){BlogEngine.$("commentPreview")&&(BlogEngine.$("commentPreview").innerHTML=n)},toggleCommentSavingIndicators:function(n){BlogEngine.$("btnSaveAjax").disabled=n;BlogEngine.$("ajaxLoader").style.display=n?"inline":"none";BlogEngine.$("status").className="";BlogEngine.$("status").innerHTML="";n||(BlogEngine.$("commentPreview")&&(BlogEngine.$("commentPreview").innerHTML=""),BlogEngine.composeComment())},onCommentError:function(n){BlogEngine.toggleCommentSavingIndicators(!1);n=n||"Unknown error occurred.";var t=n.indexOf("|");if(t>0)for(n=n.substr(0,t);n.length>0&&n.substr(n.length-1,1).match(/\d/);)n=n.substr(0,n.length-1);BlogEngine.$("recaptcha_response_field")&&Recaptcha.reload();BlogEngine.$("spnSimpleCaptchaIncorrect")&&(BlogEngine.$("spnSimpleCaptchaIncorrect").style.display="none");alert("Sorry, the following error occurred while processing your comment:\n\n"+n)},addComment:function(n){var t=n==!0;t||(BlogEngine.toggleCommentSavingIndicators(!0),BlogEngine.$("status").innerHTML=BlogEngineRes.i18n.savingTheComment);var r=BlogEngine.comments.nameBox.value,u=BlogEngine.comments.emailBox.value,f=BlogEngine.comments.contentBox.value,c=BlogEngine.comments.captchaField.value,e=BlogEngine.comments.websiteBox?BlogEngine.comments.websiteBox.value:"",o=BlogEngine.comments.countryDropDown?BlogEngine.comments.countryDropDown.value:"",l=BlogEngine.$("cbNotify")?BlogEngine.$("cbNotify").checked:!1,a=BlogEngine.comments.replyToId?BlogEngine.comments.replyToId.value:"",s="";typeof grecaptcha!="undefined"&&(s=grecaptcha.getResponse());var h=BlogEngine.$("simpleCaptchaValue"),v=h?h.value:"",i=BlogEngine.$("avatarImgSrc"),y=i&&i.value?i.value:"",p=t?BlogEngine.endShowPreview:BlogEngine.appendComment,w=r+"-|-"+u+"-|-"+e+"-|-"+o+"-|-"+f+"-|-"+l+"-|-"+t+"-|-"+c+"-|-"+a+"-|-"+y+"-|-"+s+"-|-"+v;WebForm_DoCallback(BlogEngine.comments.controlId,w,p,"comment",BlogEngine.onCommentError,!1);t||typeof OnComment=="undefined"||OnComment(r,u,e,o,f)},cancelReply:function(){BlogEngine.replyToComment("")},replyToComment:function(n){var i,r,u,t;BlogEngine.comments.replyToId.value=n;i=BlogEngine.$(".comment-form");n&&n!=""&&n!=null&&n!="00000000-0000-0000-0000-000000000000"?(BlogEngine.$("cancelReply").style.display="",u=BlogEngine.$("id_"+n),t=BlogEngine.$("replies_"+n),t==null&&(t=document.createElement("div"),t.className=".comment-replies",t.id="replies_"+n,u.appendChild(t)),t.style.display="",t.appendChild(i)):(r=BlogEngine.$("commentlist"),r.appendChild(i),BlogEngine.$("cancelReply").style.display="none");BlogEngine.comments.nameBox.focus()},appendComment:function(n,t){var i,r,u,f;t=="comment"&&(BlogEngine.$("recaptcha_response_field")&&Recaptcha.reload(),BlogEngine.$("spnSimpleCaptchaIncorrect")&&(BlogEngine.$("spnSimpleCaptchaIncorrect").style.display="none"),n=="RecaptchaIncorrect"||n=="SimpleCaptchaIncorrect"?(BlogEngine.$("spnCaptchaIncorrect")&&(BlogEngine.$("spnCaptchaIncorrect").style.display=""),BlogEngine.$("spnSimpleCaptchaIncorrect")&&(BlogEngine.$("spnSimpleCaptchaIncorrect").style.display=""),BlogEngine.toggleCommentSavingIndicators(!1)):n=="EmailNotValid"?(alert("Email not valid!"),BlogEngine.toggleCommentSavingIndicators(!1)):(BlogEngine.$("spnCaptchaIncorrect")&&(BlogEngine.$("spnCaptchaIncorrect").style.display="none"),BlogEngine.$("spnSimpleCaptchaIncorrect")&&(BlogEngine.$("spnSimpleCaptchaIncorrect").style.display="none"),i=BlogEngine.$("commentlist"),i.innerHTML.length<10&&(i.innerHTML="<h1 id='comment'>"+BlogEngineRes.i18n.comments+"<\/h1>"),r=BlogEngine.comments.replyToId?BlogEngine.comments.replyToId.value:"",r!=""?(u=BlogEngine.$("replies_"+r),u.innerHTML+=n):(i.innerHTML+=n,i.style.display="block"),BlogEngine.comments.contentBox.value="",BlogEngine.comments.contentBox=BlogEngine.$(BlogEngine.comments.contentBox.id),BlogEngine.toggleCommentSavingIndicators(!1),BlogEngine.$("status").className="success",BlogEngine.$("status").innerHTML=BlogEngine.comments.moderation?BlogEngineRes.i18n.commentWaitingModeration:BlogEngineRes.i18n.commentWasSaved,f=BlogEngine.$("comment-form"),i.appendChild(f),BlogEngine.comments.replyToId&&(BlogEngine.comments.replyToId.value=""),BlogEngine.$("cancelReply")&&(BlogEngine.$("cancelReply").style.display="none")));BlogEngine.$("btnSaveAjax").disabled=!1},validateAndSubmitCommentForm:function(){if(BlogEngine.comments.nameBox.value.length<1)return BlogEngine.$("status").innerHTML="Name is required.",BlogEngine.$("status").className="warning",BlogEngine.$("txtName").focus(),!1;if(BlogEngine.comments.emailBox.value.length<1)return BlogEngine.$("status").innerHTML="Email is required.",BlogEngine.$("status").className="warning",BlogEngine.$("txtEmail").focus(),!1;if(BlogEngine.comments.contentBox.value.length<1)return BlogEngine.$("status").innerHTML="Comment is required.",BlogEngine.$("status").className="warning",BlogEngine.$("txtContent").focus(),!1;return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,5})$/.test(BlogEngine.comments.emailBox.value)==!1?(BlogEngine.$("status").innerHTML="Email is not valid.",BlogEngine.$("status").className="warning",BlogEngine.$("txtEmail").focus(),!1):(BlogEngine.addComment(),!0)},addBbCode:function(n){var t,r,i;try{if(t=BlogEngine.comments.contentBox,t.selectionStart){var u=t.value.substring(0,t.selectionStart),f=t.value.substr(t.selectionEnd),i=t.value.substring(t.selectionStart,t.selectionEnd);t.value=u+"["+n+"]"+i+"[/"+n+"]"+f;t.focus()}else document.selection&&document.selection.createRange&&(r=document.selection.createRange().text,t.focus(),i=document.selection.createRange(),i.text="["+n+"]"+r+"[/"+n+"]")}catch(e){}return},search:function(n,t){t||(t="searchfield");var u=BlogEngine.$(t),i=BlogEngine.$("searchcomments"),f=typeof BlogEngineRes.fileExtension=="undefined"?".aspx":BlogEngineRes.fileExtension,r="search"+f+"?q="+encodeURIComponent(u.value);return i!=null&&i.checked&&(r+="&comment=true"),top.location.href=n+r,!1},searchClear:function(n,t){t||(t="searchfield");var i=BlogEngine.$(t);i.value==n?i.value="":i.value==""&&(i.value=n)},rate:function(n,t,i){BlogEngine.createCallback("rating.axd?id="+t+"&rating="+i,BlogEngine.ratingCallback,n)},ratingCallback:function(n){var i=n.substring(0,1),t=n.substring(1);t=="OK"?(typeof OnRating!="undefined"&&OnRating(i),alert(BlogEngineRes.i18n.ratingHasBeenRegistered)):t=="HASRATED"?alert(BlogEngineRes.i18n.hasRated):alert("An error occured while registering your rating. Please try again")},createCallback:function(n,t,i){var r=BlogEngine.getHttpObject();r.open("GET",n,!0);i&&r.setRequestHeader&&r.setRequestHeader("x-blog-instance",i.toString());r.onreadystatechange=function(){r.readyState==4&&r.responseText.length>0&&t!=null&&t(r.responseText)};r.send(null)},getHttpObject:function(){if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}return!1},updateCalendar:function(n,t){var i=BlogEngine.$("calendarContainer");i.innerHTML=n;BlogEngine.Calendar.months[t]=n},toggleMonth:function(n){var u=BlogEngine.$("monthList"),t=u.getElementsByTagName("ul"),r;for(i=0;i<t.length;i++)if(t[i].id==n){r=t[i].className=="open"?"":"open";t[i].className=r;break}},equal:function(n,t){var i=n.toLowerCase().replace(new RegExp(" ","gi"),""),r=t.toLowerCase().replace(new RegExp(" ","gi"),"");return i==r},xfnRelationships:["friend","acquaintance","contact","met","co-worker","colleague","co-resident","neighbor","child","parent","sibling","spouse","kin","muse","crush","date","sweetheart","me"],hightLightXfn:function(){var u=BlogEngine.$("content"),t,r,n;if(u!=null)for(t=u.getElementsByTagName("a"),i=0;i<t.length;i++)if(r=t[i],n=r.getAttribute("rel"),n&&n!="nofollow")for(j=0;j<BlogEngine.xfnRelationships.length;j++)if(n.indexOf(BlogEngine.xfnRelationships[j])>-1){r.title="XFN relationship: "+n;break}},showRating:function(n,t,i,r,u){var h=document.createElement("div"),c,o,s,f,l,e;for(h.className="rating",c=document.createElement("p"),h.appendChild(c),c.innerHTML=i==0?BlogEngineRes.i18n.beTheFirstToRate:BlogEngineRes.i18n.currentlyRated.replace("{0}",new Number(r).toFixed(1)).replace("{1}",i),o=document.createElement("ul"),o.className="star-rating small-star",h.appendChild(o),s=document.createElement("li"),s.className="current-rating",s.style.width=Math.round(r*20)+"%",s.innerHTML="Currently "+r+"/5 Stars.",o.appendChild(s),f=1;f<=5;f++)l=document.createElement("li"),e=document.createElement("a"),e.innerHTML=f,e.href="rate/"+f,e.className=BlogEngine.englishNumber(f),e.title=BlogEngineRes.i18n.rateThisXStars.replace("{0}",f.toString()).replace("{1}",f==1?"":"s"),e.rel="nofollow",e.onclick=function(){return BlogEngine.rate(u,t,BlogEngine.innerHTML),!1},l.appendChild(e),o.appendChild(l);n.innerHTML="";n.appendChild(h);n.style.visibility="visible"},applyRatings:function(){for(var t,i=document.getElementsByTagName("div"),n=0;n<i.length;n++)i[n].className=="ratingcontainer"&&(t=i[n].innerHTML.split("|"),BlogEngine.showRating(i[n],t[0],t[1],t[2],t[3]))},englishNumber:function(n){return n==1?"one-star":n==2?"two-stars":n==3?"three-stars":n==4?"four-stars":"five-stars"},addLoadEvent:function(n){var t=window.onload;window.onload=typeof onload!="function"?n:function(){t();n()}},filterByAPML:function(){var o=document.documentElement.clientWidth+document.documentElement.scrollLeft,h=document.documentElement.clientHeight+document.documentElement.scrollTop,t,n,e,r,i,u,s,f;document.body.style.position="static";t=document.createElement("div");t.style.zIndex=2;t.id="layer";t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.height=document.documentElement.scrollHeight+"px";t.style.width=o+"px";t.style.backgroundColor="black";t.style.opacity=".6";t.style.filter+="progid:DXImageTransform.Microsoft.Alpha(opacity=60)";document.body.appendChild(t);n=document.createElement("div");n.style.zIndex=3;n.id="apmlfilter";n.style.position=navigator.userAgent.indexOf("MSIE 6")>-1?"absolute":"fixed";n.style.top="200px";n.style.left=o/2-200+"px";n.style.height="50px";n.style.width="400px";n.style.backgroundColor="white";n.style.border="2px solid silver";n.style.padding="20px";document.body.appendChild(n);e=document.createElement("p");e.innerHTML=BlogEngineRes.i18n.apmlDescription;e.style.margin="0px";n.appendChild(e);r=document.createElement("form");r.method="get";r.style.display="inline";r.action=BlogEngineRes.webRoot;n.appendChild(r);i=document.createElement("input");i.type="text";i.value=BlogEngine.getCookieValue("url")||"http://";i.style.width="320px";i.id="txtapml";i.name="apml";i.style.background="url("+BlogEngineRes.webRoot+"Content/images/blog/apml.png) no-repeat 2px center";i.style.paddingLeft="16px";r.appendChild(i);i.focus();u=document.createElement("input");u.type="submit";u.value=BlogEngineRes.i18n.filter;u.onclick=function(){location.href=BlogEngineRes.webRoot+"?apml="+encodeURIComponent(BlogEngine.$("txtapml").value)};r.appendChild(u);s=document.createElement("br");n.appendChild(s);f=document.createElement("a");f.innerHTML=BlogEngineRes.i18n.cancel;f.href="javascript:void(0)";f.onclick=function(){document.body.removeChild(BlogEngine.$("layer"));document.body.removeChild(BlogEngine.$("apmlfilter"));document.body.style.position=""};n.appendChild(f)},getCookieValue:function(n){var t=new String(document.cookie),i,r;return t!=null&&t.indexOf("comment=")>-1&&(i=t.indexOf(n+"=")+n.length+1,r=t.indexOf("&",i),r>i&&i>-1)?t.substring(i,r):null},test:function(){alert("test")},comments:{flagImage:null,contentBox:null,moderation:null,checkName:null,postAuthor:null,nameBox:null,emailBox:null,websiteBox:null,countryDropDown:null,captchaField:null,controlId:null,replyToId:null}};BlogEngine.addLoadEvent(BlogEngine.hightLightXfn);typeof $=="undefined"&&(window.$=BlogEngine.$);BlogEngine.addLoadEvent(BlogEngine.applyRatings);